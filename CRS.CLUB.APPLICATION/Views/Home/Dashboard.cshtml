@model CRS.CLUB.APPLICATION.Models.Home.CommonDashboardModel
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .font-high {
        font-weight: 700;
    }

    .font-medium {
        font-weight: 500;
    }
</style>
<!-- booking information  -->
<div class="title-info mb-[16px] flex justify-between gap-[20px] items-end">
    <div>
        <div class="heading-title mb-[20px]">
            @CRS.CLUB.APPLICATION.Resources.Resource.Dashboard
            @*@if (Session["ClubName"] != null)
                {
                    @Session["ClubName"].ToString();
                }*@
        </div>
        <div class="heading-title">
            @CRS.CLUB.APPLICATION.Resources.Resource.Overview
        </div>
    </div>
</div>
<div class="flex flex-col px-[32px] pb-4">
    <div class="pb-[24px]">
        <div id="tab1" class="tab-content">
            <!-- Content for Tab 1 -->
            <div class="flex gap-[10px]">
                <div class=" dashboard-date-list flex gap-4  ">
                    <div class="calender-card ">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Sunday
                            </div>
                            <div class="font-bold"> 30</div>
                        </div>

                    </div>
                    <div class="calender-card ">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Monday
                            </div>
                            <div class="font-bold"> 31</div>
                        </div>

                    </div>
                    <div class="calender-card">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Tuesday
                            </div>
                            <div class="font-bold"> 1</div>
                        </div>

                    </div>
                    <div class="calender-card">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Wednesday
                            </div>
                            <div class="font-bold"> 2</div>
                        </div>

                    </div>
                    <div class="calender-card">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Thursday
                            </div>
                            <div class="font-bold"> 3</div>
                        </div>

                    </div>
                    <div class="calender-card ">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Friday
                            </div>
                            <div class="font-bold"> 4</div>
                        </div>

                    </div>
                    <div class="calender-card">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Saturday
                            </div>
                            <div class="font-bold"> 5</div>
                        </div>

                    </div>
                    <div class="calender-card ">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Sunday
                            </div>
                            <div class="font-bold"> 6</div>
                        </div>

                    </div>
                    <div class="calender-card ">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Monday
                            </div>
                            <div class="font-bold">7</div>
                        </div>

                    </div>
                    <div class="calender-card">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Tuesday
                            </div>
                            <div class="font-bold">8</div>
                        </div>

                    </div>
                    <div class="calender-card">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Wednesday
                            </div>
                            <div class="font-bold">9</div>
                        </div>

                    </div>
                    <div class="calender-card">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Thursday
                            </div>
                            <div class="font-bold">10</div>
                        </div>

                    </div>
                    <div class="calender-card ">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Friday
                            </div>
                            <div class="font-bold">11</div>
                        </div>

                    </div>
                    <div class="calender-card">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Saturday
                            </div>
                            <div class="font-bold">12</div>
                        </div>

                    </div>
                    <div class="calender-card ">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Sunday
                            </div>
                            <div class="font-bold">13</div>
                        </div>

                    </div>
                    <div class="calender-card ">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Monday
                            </div>
                            <div class="font-bold">14</div>
                        </div>

                    </div>
                    <div class="calender-card">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Tuesday
                            </div>
                            <div class="font-bold">15</div>
                        </div>

                    </div>
                    <div class="calender-card">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Wednesday
                            </div>
                            <div class="font-bold">16</div>
                        </div>

                    </div>
                    <div class="calender-card">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Thursday
                            </div>
                            <div class="font-bold">17</div>
                        </div>

                    </div>
                    <div class="calender-card ">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Friday
                            </div>
                            <div class="font-bold">18</div>
                        </div>

                    </div>
                    <div class="calender-card">
                        <div class="text-xs font-medium text-center">
                            <div>
                                @CRS.CLUB.APPLICATION.Resources.Resource.Saturday
                            </div>
                            <div class="font-bold">19</div>
                        </div>

                    </div>
                </div>
                <div class="flex flex-col justify-between">
                    <div class="h-[32px] w-[32px] flex justify-center items-center border rounded-[4px] border-[#D75A8B] cursor-pointer">
                        <i class="las la-angle-left text-lg  font-bold"></i>
                    </div>
                    <div class="h-[32px] w-[32px] flex justify-center items-center border rounded-[4px] border-[#D75A8B] cursor-pointer ">
                        <i class="las la-angle-right text-lg  font-bold"></i>
                    </div>
                </div>
            </div>
        </div>
        <div id="tab2" class="tab-content">
        </div>
        <div id="tab3" class="tab-content">
        </div>
        <div id="tab4" class="tab-content">
        </div>
    </div>
    <div>
        <div class="flex gap-[10px] pb-4 ">
            <div class="booking-card border border-[#E4E4E7] ">
                <div class="booking-card-title">
                    @CRS.CLUB.APPLICATION.Resources.Resource.Total_Hosts
                </div>
                <div class="booking-card-total">
                    @Model.GetDashboardInfoList.TotalHost
                    <span>
                        + 0%
                        <img src="/Content/assets/images/club/arrow-up.svg" />
                    </span>
                </div>
            </div>
            <div class="booking-card border border-[#E4E4E7]">
                <div class="booking-card-title">
                    @CRS.CLUB.APPLICATION.Resources.Resource.Total_Bookings
                </div>
                <div class="booking-card-total">
                    @Model.GetDashboardInfoList.TotalBooking
                    <span>
                        + 0%
                        <img src="/Content/assets/images/club/arrow-up.svg" />
                    </span>
                </div>
            </div>
            <div class="booking-card border border-[#E4E4E7]">
                <div class="booking-card-title">
                    @CRS.CLUB.APPLICATION.Resources.Resource.Total_Visitors
                </div>
                <div class="booking-card-total">
                    @Model.GetDashboardInfoList.TotalVisitor
                    <span>
                        + 0%
                        <img src="/Content/assets/images/club/arrow-up.svg" />
                    </span>
                </div>
            </div>
            <div class="booking-card border border-[#E4E4E7]">
                <div class="booking-card-title">
                    @CRS.CLUB.APPLICATION.Resources.Resource.Total_Sales
                </div>
                <div class="booking-card-total">
                    ¥ @Model.GetDashboardInfoList.TotalSales
                    <span>
                        + 0%
                        <img src="/Content/assets/images/club/arrow-up.svg" />
                    </span>
                </div>
            </div>
        </div>
    </div>
    <div class="flex gap-9  mb-4">
        <div class="flex gap-9  mb-4">
            <div class=" border border-[#E4E4E7] rounded-[10px] p-4 w-[688px]">
                <div class="bg-white ">
                    <div class=" flex justify-between items-center">
                        <div class=" flex  items-center gap-[55px] w-max">
                            <div class="font-bold text-[#18181B] w-max flex-none">@CRS.CLUB.APPLICATION.Resources.Resource.Sales_Report</div>
                            <div class="flex tab-container-chart ">
                                <button id="tab1Button" class="tab-button-chart tab-link active">12 @CRS.CLUB.APPLICATION.Resources.Resource.Month</button>
                                <button id="tab2Button" class="tab-button-chart tab-link">6 @CRS.CLUB.APPLICATION.Resources.Resource.Month</button>
                                <button id="tab3Button" class="tab-button-chart tab-link">30 @CRS.CLUB.APPLICATION.Resources.Resource.Days</button>
                                <button id="tab3Button" class="tab-button-chart tab-link">7 @CRS.CLUB.APPLICATION.Resources.Resource.Days</button>

                            </div>
                        </div>
                        <div class="font-bold text-[11px] cursor-pointer flex gap-[6px] w-max justify-center items-center border border-[#D4D4D8] rounded-[5px] p-[6px] ">
                            <svg xmlns="http://www.w3.org/2000/svg" width="15" height="16" viewBox="0 0 15 16" fill="none">
                                <path d="M7.4023 7.10983V10.7857M7.4023 10.7857L5.63195 8.94777M7.4023 10.7857L9.17265 8.94777M10.3529 13.849H4.45172C3.79989 13.849 3.27148 13.3004 3.27148 12.6237V4.04659C3.27148 3.36987 3.79989 2.82129 4.45172 2.82129H7.74798C7.90449 2.82129 8.05459 2.88584 8.16526 3.00073L11.3603 6.31774C11.4709 6.43263 11.5331 6.58846 11.5331 6.75095V12.6237C11.5331 13.3004 11.0047 13.849 10.3529 13.849Z"
                                      stroke="#18181B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                            <div class="w-max leading-[16px]" id="export">@CRS.CLUB.APPLICATION.Resources.Resource.Export_Pdf</div>
                        </div>
                    </div>
                </div>
                <div class="" id="html2pdf">
                    <div id="tab1" class="tab-content-chart">
                        <div class="w-full">
                            <canvas class="w-full h-[200px] cursor-pointer" id="Month12"></canvas>
                        </div>
                    </div>
                    <div id="tab2" class="tab-content-chart hidden">
                        <div class="w-full">
                            <canvas class="w-full" id="Month6"></canvas>
                        </div>
                    </div>
                    <div id="tab2" class="tab-content-chart hidden">
                        3
                    </div>
                    <div id="tab2" class="tab-content-chart hidden">
                        4
                    </div>

                </div>
            </div>
            <script>
                // Your data object
                const datalist =@Html.Raw(Json.Encode(Model.GetChartInfo));
                const labels = datalist.map(entry => entry.Month);
                const values = datalist.map(entry => entry.TotalSales);
                const dataMonth12 = {
                    labels: labels,
                    datasets: [{
                        label: "¥",
                        data: values,
                        fill: true,
                        border: "1px solid",
                        borderColor: '#EC4899',
                        backgroundColor: '#FFB6C1',
                        tension: 0.1,
                        pointStyle: 'circle',
                        pointRadius: 5,
                        pointHoverRadius: 7
                    }]
                };
                // Configuration object
                const configMonth12 = {
                    type: 'line',
                    data: dataMonth12,
                };
                // Create a chart
                const Month12 = new Chart(document.getElementById('Month12'), configMonth12);
            </script>
        </div>
        <div class="p-4 rounded-[10px] border border-[#E4E4E7] flex flex-col gap-[20px] w-[368px] h-[394px] overflow-hidden ">
            <div class="grid gap-1">
                <div class="text-base font-bold text-primary-300 ">
                    @CRS.CLUB.APPLICATION.Resources.Resource.Top_Ranking_Hosts
                </div>
                <div class="text-sm  text-gray-500 ">
                    @CRS.CLUB.APPLICATION.Resources.Resource.Our_top_booked_hosts
                </div>
            </div>
            <div class="h-[249px] overflow-hidden overflow-y-auto no-scrollbar flex flex-col gap-2">
                @foreach (var item in Model.GetHostList)
                {
                    <div class="round-image-text flex gap-[12px]">
                        <img class="w-[36px] h-[36px] rounded-full" src="@item.HostImage" />
                        <div class="flex justify-between w-full">
                            <div class="text-image grid gap-1">
                                <div class="text-sm font-semibold text-primary-300 ">@item.HostName</div>
                            </div>
                            <div class="text-image grid gap-1">
                                <div class="text-sm font-semibold text-primary-300 text-end ">@item.BookingCount</div>
                                <div class="text-sm  text-gray-500 text-end ">@CRS.CLUB.APPLICATION.Resources.Resource.Total_Booking</div>
                            </div>
                        </div>
                    </div>
                }
            </div>
            <a onclick="HostListRedirect()" class="text-[11px] font-semibold text-secondary-text-2 text-center cursor-pointer">
                @CRS.CLUB.APPLICATION.Resources.Resource.See_All_Hosts
                <i class="las la-angle-right"></i>
            </a>
        </div>
    </div>
</div>
<script>
    $('#export').click(function () {
        var currentdate = new Date().toJSON();
        var element = document.getElementById('html2pdf');
        html2pdf().from(element).set({
            margin: [30, 10, 5, 10],
            jsPDF: { orientation: 'landscape', unit: 'pt', format: 'letter', compressPDF: true }
        }).save('CRS_' + currentdate + '.pdf');
    });

    function HostListRedirect() {
        localStorage.setItem("tablink-id_dashboard", "tab2Button");
        localStorage.setItem("tablink-name_dashboard", "ホスト管理");
        localStorage.setItem("tablink-name_dashboard", "Host Management");
        window.location.href = "@Url.Action("Index", "ClubManagement")";
    }
</script>